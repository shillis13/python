$schema: http://json-schema.org/draft-07/schema#
schema_version: '1.3'
title: Chat Index Schema
description: Schema for the master index file that catalogs all individual chat history
  files.
type: object
properties:
  metadata:
    type: object
    properties:
      last_updated:
        type: string
        format: date-time
      version:
        type: integer
        minimum: 1
      total_conversations:
        type: integer
        minimum: 0
      format_version:
        type: string
        pattern: ^[0-9]+\.[0-9]+$
      processing_stage:
        type: string
        description: 'Processing stage for all entries if uniform: raw_export (direct
          from platform), schema_mapped (schema-compliant, no AI metadata), ai_metadata_generated
          (AI analysis complete), project_refined (metadata reviewed in project context),
          archived (long-term storage)'
        enum:
        - raw_export
        - schema_mapped
        - ai_metadata_generated
        - project_refined
        - archived
    required:
    - last_updated
    - version
    - total_conversations
    - format_version
  conversations:
    type: array
    items:
      type: object
      properties:
        conversation_id:
          type: string
          pattern: ^conv_[0-9]{8}T[0-9]{6}Z(_[a-z0-9]+)?$
        title:
          type: string
          minLength: 1
        abstract:
          type: string
        key_insights:
          type: array
          items:
            type: string
        start_date:
          type: string
          format: date-time
        last_updated:
          type: string
          format: date-time
        version:
          type: integer
          minimum: 1
        tags:
          type: array
          items:
            type: string
        file_path:
          type: string
        message_count:
          type: integer
          minimum: 0
        processing_stage:
          type: string
          description: 'Processing stage for this entry: raw_export (direct from platform),
            schema_mapped (schema-compliant, no AI metadata), ai_metadata_generated
            (AI analysis complete), project_refined (metadata reviewed in project
            context), archived (long-term storage)'
          enum:
          - raw_export
          - schema_mapped
          - ai_metadata_generated
          - project_refined
          - archived
      required:
      - conversation_id
      - title
      - abstract
      - start_date
      - last_updated
      - version
      - tags
      - file_path
      - message_count
      - processing_stage
required:
- metadata
- conversations
