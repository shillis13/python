#!/usr/bin/env bash
# scripts/add_flag - Add flag to todo

usage() {
    cat << EOF
Usage: add_flag FLAG_NAME [TODO_DIR]

Adds a flag file to a todo directory.

Common flags:
  needs_testing, needs_clarification, high_priority, 
  quick_win, blocked_by_other

Arguments:
  FLAG_NAME   Flag name (without .flag extension)
  TODO_DIR    Todo directory (default: current directory)

Examples:
  add_flag needs_testing
  add_flag high_priority todo_fix_bug/
  cd todo_setup && add_flag quick_win
EOF
    exit 1
}

[[ $# -eq 0 ]] && usage

FLAG="$1"
TODO_DIR="${2:-.}"

if [[ ! -d "$TODO_DIR" ]]; then
    echo "Error: Todo directory not found: $TODO_DIR"
    exit 1
fi

touch "$TODO_DIR/${FLAG}.flag"
echo "âœ“ Added flag: $FLAG"
echo "  Location: $TODO_DIR"
